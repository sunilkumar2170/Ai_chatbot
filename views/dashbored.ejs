
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Admin Dashboard</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel='stylesheet' href='/main.css'>
  <style>
    body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #f4f6f8;
  margin: 0;
  padding: 40px;
  color: #333;
}

h1 {
  text-align: center;
  color: #222;
  margin-bottom: 10px;
}

h3 {
  text-align: center;
  color: #555;
  margin-bottom: 30px;
}

.container {
  width: 90%;
  max-width: 900px;
  margin: 0 auto;
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

thead {
  background: #007bff;
  color: #fff;
}

th, td {
  padding: 12px 15px;
  border: 1px solid #ddd;
  text-align: left;
}

tr:nth-child(even) {
  background: #f9f9f9;
}

.btn {
  display: inline-block;
  padding: 6px 12px;
  text-decoration: none;
  color: #fff;
  border-radius: 4px;
  font-size: 14px;
  transition: 0.2s ease;
}

.btn-primary {
  background: #007bff;
}

.btn-danger {
  background: #dc3545;
}

.btn:hover {
  opacity: 0.85;
  transform: translateY(-1px);
}

.text-center {
  text-align: center;
}

.table-dark {
  background: #343a40;
  color: #fff;
}

  </style>
</head>
<body>
  <h1>All User List</h1>
  <h3>Total Users: <%= employees.length %></h3>

  <div class="container mt-5">
    <% if (employees.length > 0) { %>
      <table class="table table-bordered table-striped">
        <thead class="table-dark">
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <% employees.forEach(function(emp) { %>
            <tr>
              <td><%= emp.name %></td>
              <td><%= emp.email %></td>
              <td>
              <a href="/block/<%= emp._id %>" class="btn btn-warning btn-sm">
  <% if (emp.isBlocked) { %> 
    <span style="color:green;">Unblock</span>
  <% } else { %> 
    <span style="color:red;">Block</span>
  <% } %>
</a>


                <a href="/delete/<%= emp._id %>" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure?')">Delete</a>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    <% } else { %>
      <p>No user records found.</p>
    <% } %>
  </div>

  
<h1>All Queries</h1>
<div class="container mt-5">
  <% if (queries.length > 0) { %>
    <table class="table table-bordered table-striped">
      <thead class="table-dark">
        <tr>
          <th>User ID</th>
          <th>Question</th>
          <th>Answer</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% queries.forEach(function(q) { %>
          <tr>
            <td><%= q.userId %></td>
            <td><%= q.question %></td>
            <td>
              <% if (q.answer) { %>
                <%= q.answer %>
              <% } else { %>
                ---
              <% } %>
            </td>
            <td><%= q.status %></td>
            <td>
              <% if (q.status === 'open') { %>
                <!-- Answer form -->
                <form action="/admin/answer/<%= q._id %>" method="POST" style="display:inline;">
                  <input type="text" name="answer" placeholder="Your answer..." required>
                  <button type="submit" class="btn btn-primary btn-sm">Submit</button>
                </form>
              <% } %>
            </td>
          </tr>
        <% }); %>
      </tbody>
    </table>
  <% } else { %>
    <p>No queries found.</p>
  <% } %>
</div>


</body>
</html>
